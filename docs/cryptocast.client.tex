\subsection{Package \lstinline!cryptocast.client!}
The client contains an instance of \lstinline|FileChooser|, which can be used to select any file from the SD card 
 of an Android gadget. Since a private key is necessary to encrypt data received from a server the 
 \lstinline|FileChooser| is used to select a keyfile. All servers and responding keyfiles are placed 
 in an instance of \lstinline|ServerHistory| and therefore can be saved and loaded after closing the client.
 Every error is displayed by using a simple pop up window defined by the class \lstinline|ErrorFragment|.
\input{cryptocast.client.custom.tex}
\subsubsection{Class \lstinline|StreamViewerActivity|}
This activity is responsible for decrypting the received data
 and viewing it. \\
\noindent\begin{minipage}[t]{5cm}
\vspace{0.3em}
\hspace*{2em}
\begin{tikzpicture}
\umlclass[]{StreamViewerActivity}{

}{
+ onOptionsItemSelected(item : MenuItem) : boolean \\ + togglePlay() \\ + isPlaying() : boolean
}
\end{tikzpicture}
\vspace{0.3em}
\end{minipage}



\textbf{\sffamily Superclasses and Interfaces}
\begin{itemize}
\item \lstinline|FragmentActivity|
\end{itemize}


\textbf{\sffamily Constructors}
\begin{itemize}
\item \lstinline|public| \lstinline|StreamViewerActivity|\lstinline|(InChannel inputStream)|\\ \\[-0.6em]
Initializes a viewer.
\begin{itemize}
\item \lstinline|inputStream|: The data stream
\end{itemize}



\end{itemize}


\textbf{\sffamily Methods}
\begin{itemize}
\item \lstinline|public boolean| \lstinline|onOptionsItemSelected|\lstinline|(MenuItem item)|\\ \\[-0.6em]
Handles a click on the bottom menu.
\begin{itemize}
\item \lstinline|item|: The clicked menu item
\end{itemize}



\item \lstinline|public void| \lstinline|togglePlay|\lstinline|()|\\ \\[-0.6em]
Toggle playback play/pause. Will pause if in play mode and continue if
 in pause mode.



\item \lstinline|public boolean| \lstinline|isPlaying|\lstinline|()|\\ \\[-0.6em]
\emph{Returns:} Whether the player is in playing mode.



\end{itemize}

\subsubsection{Class \lstinline|ServerHistory|}
This class is responsible for saving recently selected servers
 and their corresponding key files. \\
\noindent\begin{minipage}[t]{5cm}
\vspace{0.3em}
\hspace*{2em}
\begin{tikzpicture}
\umlclass[]{ServerHistory}{

}{
+ getServers() : Map<String, File> \\ + addServer(hostname : String, keyfile : File)
}
\end{tikzpicture}
\vspace{0.3em}
\end{minipage}



\textbf{\sffamily Superclasses and Interfaces}
\begin{itemize}
\item \lstinline|java.io.Serializable|
\end{itemize}



\textbf{\sffamily Methods}
\begin{itemize}
\item \lstinline|public Map<String, File>| \lstinline|getServers|\lstinline|()|\\ \\[-0.6em]
\emph{Returns:} The servers



\item \lstinline|public void| \lstinline|addServer|\lstinline|(String hostname, File keyfile)|\\ \\[-0.6em]
Adds a server to the list of servers.
\begin{itemize}
\item \lstinline|hostname|: The server's hostname
\item \lstinline|keyfile|: The keyfile the user has chosen for this server.
\end{itemize}



\end{itemize}

\subsubsection{Class \lstinline|MainActivity|}
This class represents the activity to connect to the server.
 Before connecting this activity start an instance of \lstinline|KeyChoiceActivity| to
 let the user choose an encryption key file. When the client receives a
 data stream an instance of a \lstinline|StreamViewerActivity| is started to process the
 stream and show its contents. \\
\noindent\begin{minipage}[t]{5cm}
\vspace{0.3em}
\hspace*{2em}
\begin{tikzpicture}
\umlclass[]{MainActivity}{

}{
+ connectToServer(view : View) \\ + onOptionsItemSelected(item : MenuItem) : boolean
}
\end{tikzpicture}
\vspace{0.3em}
\end{minipage}



\textbf{\sffamily Superclasses and Interfaces}
\begin{itemize}
\item \lstinline|FragmentActivity|
\end{itemize}



\textbf{\sffamily Methods}
\begin{itemize}
\item \lstinline|public void| \lstinline|connectToServer|\lstinline|(View view)|\\ \\[-0.6em]
Connects to a server.
\begin{itemize}
\item \lstinline|view|: The view from which this method was called.
\end{itemize}



\item \lstinline|public boolean| \lstinline|onOptionsItemSelected|\lstinline|(MenuItem item)|\\ \\[-0.6em]
Handles a click on the main menu.
\begin{itemize}
\item \lstinline|item|: The clicked item
\end{itemize}



\end{itemize}

\subsubsection{Class \lstinline|OptionsActivity|}
The option screen. \\
\noindent\begin{minipage}[t]{5cm}
\vspace{0.3em}
\hspace*{2em}
\begin{tikzpicture}
\umlclass[]{OptionsActivity}{

}{
\# onCreate(savedInstanceState : Bundle) \\ + onCreateOptionsMenu(menu : Menu) : boolean
}
\end{tikzpicture}
\vspace{0.3em}
\end{minipage}



\textbf{\sffamily Superclasses and Interfaces}
\begin{itemize}
\item \lstinline|android.app.Activity|
\end{itemize}



\textbf{\sffamily Methods}
\begin{itemize}
\item \lstinline|protected void| \lstinline|onCreate|\lstinline|(Bundle savedInstanceState)|\\ \\[-0.6em]
Receives the saved option state.
\begin{itemize}
\item \lstinline|savedInstanceState|: the old state
\end{itemize}



\item \lstinline|public boolean| \lstinline|onCreateOptionsMenu|\lstinline|(Menu menu)|\\ \\[-0.6em]
Inflates the option menu.
\begin{itemize}
\item \lstinline|menu|: The menu
\end{itemize}



\end{itemize}

\subsubsection{Class \lstinline|KeyChoiceActivity|}
This activity lets a user choose an encryption key file
 which is then sent to the server for authentication. \\
\noindent\begin{minipage}[t]{5cm}
\vspace{0.3em}
\hspace*{2em}
\begin{tikzpicture}
\umlclass[]{KeyChoiceActivity}{

}{
+ getChosenFile() : Optional<File> \\ + onFileClick(item : ListElement)
}
\end{tikzpicture}
\vspace{0.3em}
\end{minipage}



\textbf{\sffamily Superclasses and Interfaces}
\begin{itemize}
\item \lstinline|cryptocast.client.fileChooser.FileChooser|
\end{itemize}



\textbf{\sffamily Methods}
\begin{itemize}
\item \lstinline|public Optional<File>| \lstinline|getChosenFile|\lstinline|()|\\ \\[-0.6em]
\emph{Returns:} The chosen file or absent on abort.



\item \lstinline|public void| \lstinline|onFileClick|\lstinline|(ListElement item)|\\ \\[-0.6em]
Called when the user clicks a file in the list.
\begin{itemize}
\item \lstinline|item|: The clicked list item.
\end{itemize}



\end{itemize}

\subsubsection{Class \lstinline|ErrorFragment|}
This class is used to pop up an error message. \\
\noindent\begin{minipage}[t]{5cm}
\vspace{0.3em}
\hspace*{2em}
\begin{tikzpicture}
\umlclass[]{ErrorFragment}{

}{
+ getMessage() : String
}
\end{tikzpicture}
\vspace{0.3em}
\end{minipage}



\textbf{\sffamily Superclasses and Interfaces}
\begin{itemize}
\item \lstinline|DialogFragment|
\end{itemize}


\textbf{\sffamily Constructors}
\begin{itemize}
\item \lstinline|public| \lstinline|ErrorFragment|\lstinline|(String message)|\\ \\[-0.6em]
Creates a new ErrorFragment which can be used to print the given error message.
\begin{itemize}
\item \lstinline|message|: Error message describing the error which occured before this fragment pops up.
\end{itemize}



\end{itemize}


\textbf{\sffamily Methods}
\begin{itemize}
\item \lstinline|public String| \lstinline|getMessage|\lstinline|()|\\ \\[-0.6em]
\emph{Returns:} The error message



\end{itemize}



\begin{illustration}{Three layer architecture of the server.}

\tikzset{
  rect/.style={draw,fill=green!15,minimum height=0.8cm,rectangle},
  box/.style={
    draw=blue!50!white,
    line width=1pt,
    dash pattern=on 1pt off 4pt on 6pt off 4pt,
    inner sep=4mm, rectangle, rounded corners
  },
}

\begin{tikzpicture}[auto,node distance=1.5cm]

\node[rect,minimum width=6cm](shell) {\textbf{Shell}};
\node[rect,minimum width=3cm,xshift=-1.5cm,below of=shell](control) {Controller};;
\node[rect,minimum width=3cm,below of=control](data) {ServerData};
\node[rect,minimum width=2cm,xshift=2cm, right of=data](cmd) {Command};
\node[box,fit=(data.north west) (cmd.north east) (cmd.south east) (data.south west), inner sep= 0.2cm](databox) {};
\node[box,fit=(shell.north west) (shell.north east) (shell.south east) (shell.south west), inner sep= 0.2cm](shellbox) {};
\node[box,fit=(control.north west) (control.north east) (control.south east) (control.south west), inner sep= 0.2cm](controlbox) {};

\node[left of=shellbox,xshift=-3cm](presencaption) {\textbf{Presentation}};
\node[left of=controlbox,xshift=-1.5cm](applicaption) {\textbf{Application}};
\node[left of=databox,xshift=-3cm](datacaption) {\textbf{Data}};


\draw [<->]  (-1.5,-0.4) --  (control.north)
;
\draw [->]  (2,-0.4) --  (cmd.north)
  ;
\draw [->]  (control.south) --  (data.north)
  ;

\end{tikzpicture}

\end{illustration}
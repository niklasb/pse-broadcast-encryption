\documentclass[a4paper,10pt]{scrartcl}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{booktabs}
\usepackage{import}
\usepackage{xspace}
\usepackage{enumitem}
\usepackage{cite}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{wrapfig}
\usepackage{tikz-uml}
\usepackage{gantt}
\usepackage{pdflscape}
\usetikzlibrary{arrows}
\usetikzlibrary{fit}
\usetikzlibrary{calc}
\usepackage{float}
\usepackage{amssymb}
\usepackage{listings}
\usepackage[section]{placeins} % don't move figures beyond the next section heading

% this is needed for forms and links within the text
\usepackage{hyperref}

% Variables
\newcommand{\authorName}{
   Mohammed~Abu~Jayyab,
   Niklas~Baumstark,
   Tobias~Gräf,
   Amrei~Loose,
   Christoph~Michel,
}
\newcommand{\authorNameEmph}{
   Mohammed~Abu~Jayyab,
   Niklas~Baumstark,
   \textbf{Tobias~Gräf},
   Christoph~Michel,
   Amrei~Loose,
}

\newcommand{\dateFirstVersion}{\today}
\newcommand{\customer}{Karlsruhe Institute of Technology}
\newcommand{\contractor}{A company}
\newcommand{\projectName}{Broadcast Encryption\xspace}

\newcommand{\doctitle}{\projectName (Design document)}
\title{\doctitle}
\author{\authorName}
\date{\today}

\include{style}

\begin{document}

\input{frontpage}
\tableofcontents
\clearpage

\section{Introduction}
%CryptoCast is a piece of software that provides a service to send contents from a central server to a given
%group of recipients. Transmission happens via a unidirectional communication channel like IP multicast.
%The traffic duplication that would be required for commonly used transport protocols is therefore avoided.

%It enables access control through a specific form of encryption that is based on the Naor-Pinkas broadcast
%encryption scheme. The advantage of this scheme is the 

The software CryptoCast will provide a service for sending encrypted data from a server to certain
amount of people.  This will be implemented as an unidirectional connection that makes it possible for the server
to send data without knowing how many people are receiving it and without the amount of traffic caused
by a bidirectional connection.  Also the type of the sent data will not be determined by the software. So it can be
used for all sorts of data exchange. For demonstration purposes we will implement a simple audio or video stream.

The server will be able to register new users and revoke specific persons if they are not allowed to receive the cast anymore. 
The client is an app on an Android smart phone that is used for receiving, decoding and displaying the data. 
The transport between them will be implemented with TCP but that can be replaced by another transport protocoll.

The implemented encryption algorithm will be the one by Moni Naor and Benny Pinkas, but later every other fitting the
interface can be used. This is important because there might be another more effective algorithm that can replace the implemented one.

In our design we will therefore focuse on modularity and encapsulation to enable substitution for parts of the programm without having to 
change a lot of their enviroment.

\section{Structure}
\subsection{Architecture}

We implement a server-client architecture with one central server sending the stream and multiple clients receiving it.

\input{figures/architecture_packages/architectPackages}


The server will be designed with a three layer architecture, containing layers for presentation, application and data. In our case 
the presentation layer is presented by the shell, the application layer consists of the controller and the data layer contains ServerData and Command. Dividing the server into those layers makes the different parts less complex and it is possible to modify one layer without having to change the others.

\input{figures/architecture_server/architectServer}

\section{Package description}

\input{../docs/cryptocast.comm.tex}
\input{../docs/cryptocast.crypto.tex}
\input{../docs/cryptocast.crypto.naorpinkas.tex}
\input{../docs/cryptocast.util.tex}h
\input{../docs/cryptocast.server.tex}
\input{../docs/cryptocast.client.tex}
\input{../docs/cryptocast.client.filechooser.tex}

\section{Sequences}
\begin{illustration}{Sequence diagram of a command perfomed by the Server.}
\includegraphics [width=400px] {figures/sequence_diagram_server/Server1.pdf}
\end{illustration}
\begin{illustration}{Sequence diagram of playing a stream for the first time.}
\includegraphics [width=400px] {figures/sequence_diagram_client/sequence_client.pdf}
\end{illustration}

\begin{landscape}
\begin{illustration}{Passing a piece of plaintext data through to the clients (Server side)}
\includegraphics [width=700px] {figures/sequence_diagram_comm1_server/output.pdf}
\end{illustration}
\end{landscape}

\section{GUI design}
The GUI should be user-friendly and intuitional. Therefore its design is very minimalistic, foccusing on its main purpose. 

\subsection{GUI visual examples}
The following images show prototypes of the graphical user interface.

\begin{illustration}{The main screen which is shown on program start.}
\includegraphics[width=150px]{figures/images/mainscreen.png}
\end{illustration}
\begin{illustration}{The menu which pops up after the menu button is pressed. It allows navigation between the different screens.}
\includegraphics[width=150px]{figures/images/menu.png}
\end{illustration}
\begin{illustration}{The option screen which contains preferences, traffic data and a server history.}
\includegraphics[width=150px]{figures/images/optionscreen.png}
\end{illustration}
\begin{illustration}{An example for an error message.}
\includegraphics[width=150px]{figures/images/error.png}
\end{illustration}
\begin{illustration}{The file chooser used for selecting a private key.}
\includegraphics[width=150px]{figures/images/fileChooser.png}
\end{illustration}

\subsection{GUI activity}
\begin{illustration}{Activity diagram showing possible interactions with the program.}
\includegraphics [width=500px]{figures/gui_activity_1/gui_activity_1.png}
\end{illustration}


\section{Time plan}
   \begin{illustration}{A rough time table for the implementation phase}
  \begin{gantt}[xunitlength=0.5cm,fontsize=\small,titlefontsize=\small,drawledgerline=true]{9}{23}
    \begin{ganttitle}
      \titleelement{KW 51}{7}
      \titleelement{KW 2}{7}
      \titleelement{KW 3}{7}
       \titleelement{KW 4}{2}
    \end{ganttitle}
    \begin{ganttitle}
      \numtitle{17}{1}{23}{1}
      \numtitle{7}{1}{22}{1}
    \end{ganttitle}
    \ganttbar[color=yellow]{communication}{0}{3}
    \ganttbar[color=green]{cryptography}{3}{19}
    \ganttbar[color=blue]{server model}{3}{8}
    \ganttbar[color=blue]{server shell}{11}{11}
    \ganttbar[color=red]{client model}{3}{10}
    \ganttbar[color=red]{client view}{13}{9}
    \ganttbar{connect packages}{22}{1}

    \ganttcon{11}{4}{11}{5}
    \ganttcon{13}{6}{13}{7}

    \ganttcon{3}{2}{3}{3}
    \ganttcon{3}{2}{3}{4}
    \ganttcon{3}{2}{3}{6}
    \ganttcon{22}{3}{22}{8}
    \ganttcon{22}{5}{22}{8}
    \ganttcon{22}{7}{22}{8}
  \end{gantt}
  \end{illustration}

\end{document}

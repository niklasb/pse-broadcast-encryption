\documentclass[a4paper,10pt]{scrartcl}
\usepackage[utf8]{inputenc}
\usepackage[ngerman]{babel}
\usepackage[T1]{fontenc}
\usepackage{booktabs}
\usepackage{xspace}
\usepackage{enumitem}
\usepackage{cite}
\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{arrows}
\usetikzlibrary{fit}
\usetikzlibrary{calc}
\usepackage{float}
\usepackage[section]{placeins} % don't move figures beyond the next section heading

% this is needed for forms and links within the text
\usepackage{hyperref}

% glossary, see http://en.wikibooks.org/wiki/LaTeX/Glossary
% has to be loaded AFTER hyperref so that entries are clickable
\usepackage[nonumberlist]{glossaries}

\makeglossary

% Variables
\newcommand{\authors}{
   Mohammed~Abu~Jayyab,
   Niklas~Baumstark,
   Tobias~Gräf,
   Amrei~Loose\xspace
}
\newcommand{\authorName}{ \authors, Christoph~Michel }
\newcommand{\authorNameEmph}{ \authors, \textbf{Christoph~Michel} }

\newcommand{\dateFirstVersion}{\today}
\newcommand{\customer}{Karlsruher Institut für Technologie}
\newcommand{\contractor}{Eine Firma}
\newcommand{\projectName}{Broadcast-Verschlüsselung\xspace}
\newcommand{\tags}{
   \authorName,
   Pflichtenheft,
   KIT,
   Informatik,
   PSE,
   Broadcast-Verschlüsselung
}
\newcommand{\glossarName}{Glossar}
\newcommand{\doctitle}{\projectName (Pflichtenheft)}
\title{\doctitle}
\author{\authorName}
\date{\today}

\include{style}

\begin{document}

\input{frontpage}
\tableofcontents
\clearpage

\section{Einleitung}

Heutzutage gängige Streamingdienste im Internet basieren bis auf wenige Ausnahmen auf
einem Client-Server-Modell, bei dem jeder Client eine eigene Verbindung zum Server
aufbaut, um einen Stream zu empfangen. Das Trafficaufkommen, das durch diese Art der
Kommunikation verursacht wird sowie die notwendige Bandbreite sind enorm. Nur große
Anbieter von Inhalten können sich diese Form der Verteilung überhaupt leisten.

Mit der naheliegenden Erkenntnis, dass bei dem beschriebenen Verfahren dieselben Daten
vielfach an verschiedene Empfänger versendet werden, ergibt sich ein alternatives
Vorgehen auf der Basis von Multicast: Inhalte werden vom Server nur einmal versendet
und über das Internet an mehrere Empfänger zugestellt. Damit wird vor allem der Sender,
aber auch die gesamte Internet-Infrastruktur entlastet.

Ein großes Problem stellt allerdings die Zugangskontrolle für diese Multicast-Streams
dar: Da nun der Server nicht mehr weiß, wer eigentlich den Stream empfängt, kann
er auch nicht verhindern, dass unauthorisierte Benutzer Zugang erhalten. Die Lösung
dieses Problems erfordert den Einsatz von speziellen Verschlüsselungsverfahren,
sodass zwar jeder den Stream empfangen, aber nur authorisierte Benutzer den Stream
entschlüsseln können. Besonderes Augenmerk muss dabei auf Effizienz gelegt werden,
da der Kommunikationsaufwand durch die Verschlüsselung nicht wesentlich erhöht werden
darf.

Wir wurden daher beauftragt, einen Prototyp zu entwickeln, der ein
Broadcast"=Verschlüsselungsverfahren mit speziellen wünschenswerten Eigenschaften
demonstriert.

\section{Zielbestimmung}

Die entwickelte Software ist eine Client/Server-Kombination, die es ermöglicht,
Inhalte verschlüsselt von einem Server an verschiedene Clients verteilen. Dafür
soll kein bidirektionales Kommunikationsmedium erforderlich sein.

Die Clients werden auf Basis des g"angigen mobilen Betriebssystems Android
implementiert.

Es wird ein Verschlüsselungsverfahren eingesetzt, welches die besondere
Eigenschaft besitzt, nicht mit der Gesamtzahl der Empfänger, sondern mit der Anzahl
ausgeschlossener Benutzer zu skalieren.

\subsection{Musskriterien}

\begin{itemize}

\item Server
\begin{itemize}
   \item sendet Daten an eine Empfängergruppe. Zu Demonstrationszwecken wird
         ein einfacher Audio- oder Videostream als Payload eingesetzt.
   \item erlaubt es, nicht mehr authorisierte Benutzer auszuschließen.
\end{itemize}

\item Client
\begin{itemize}
   \item erlaubt es, sich mit einem Server zu verbinden (einer Gruppe beizutreten).
   \item empfängt Daten vom Server und stellt sie dar.
   \item merkt sich zuletzt ausgew"ahlte Server, sodass ein erneuter Zugriff schnell
         m"oglich ist.
\end{itemize}

\item Kommunikation und Verschl"usselung
\begin{itemize}
   \item Nur ein unidirektionaler Kommunikationskanal vom Server zum Client wird
         vorausgesetzt. Zu Demonstrationszwecken wird TCP als Transportprotokoll
         verwendet, aber auch zuverl"assige Multicastprotokolle k"amen als Medium
         infrage.
   \item Daten werden verschl"usselt "ubertragen. Der Server bietet entsprechende
         Optionen zur Erzeugung von Schl"usseln und zur Kontrolle und Konfiguration
         der Verschl"usselungsschicht. "Uber einen externen, sicheren Kanal erh"alt
         jeder Benutzer einen privaten Schl"ussel (z.B. eine Datei), mit dem er seine
         Clientsoftware konfigurieren kann.
   \item Das verwendete Broadcast"=Verschl"usselungsverfahren basiert auf den
         in~\cite[Section~2.2]{Naor00} oder~\cite{Garg10} beschriebenen Verfahren
         oder einer Variante der Algorithmen mit vergleichbaren kryptografischen
         Eigenschaften.
   \item Die Verschl"usselung erfordert im laufenden Betrieb nur einen
         Kommunikationsoverhead, der sublinear in der Gesamtanzahl der Benutzer und
         stattdessen linear oder quasilinear in der Anzahl der ausgeschlossenen
         Benutzer ist.
\end{itemize}
\end{itemize}

\subsection{Wunschkriterien}

\begin{itemize}

\item Server
\begin{itemize}
   \item f"uhrt Statistik "uber Nutzdatenmenge und Traffic, um den Kommunikationsaufwand
         der Verschl"usselung zu analysieren.
\end{itemize}

\item Client
\begin{itemize}
   \item verf"ugt "uber eine Anzeige des angefallenen Traffics.
   \item puffert oder speichert Inhalte, sodass z.B. in einem Stream auch
         zur"uckgespult werden kann.
\end{itemize}

\item Kommunikation und Verschl"usselung
\begin{itemize}
   \item Ein effizienteres Verfahren als das in~\cite{Naor00} beschriebene wird
         entwickelt und implementiert.
\end{itemize}
\end{itemize}

\subsection{Abgrenzungskriterien}
\begin{itemize}
   \item Es wird kein Framework zur Verf"ugung gestellt, welches verschiedene
         Streamtypen implementiert. Stattdessen bleibt die Implementierung
         unabh"angig von den zugrundeliegenden Nutzdaten und ist so flexibel,
         dass eine konkrete Implementierung eines neuen Streamtyps mit
         problemlos m"oglich ist.
   \item Es wird kein Multicast-Protokoll implementiert. Stattdessen wird
         zur Demonstrationszwecken TCP zur Kommunikation benutzt und die Software
         ist so flexibel, dass eine Adaptation an ein zuverl"assiges
         Multicastverfahren problemlos m"oglich ist.
\end{itemize}

\section{Produkteinsatz}

Das Produkt wird benutzt um Inhalte an eine festgelegte Benutzergruppe zu verteilen.

\subsection{Anwendungsbereich}

Das Produkt kann in allen Bereichen zum Einsatz kommen, die das Verteilen von Daten an
bestimmte Nutzergruppen erfordert. Beispielsweise in den Bereichen Pay-TV, Blu-ray, Audio-Video-Streaming oder Digital-Rights-Management

\subsection{Zielgruppen}
\begin{itemize}
   \item Die Gruppe der Firma-Mitarbeiter.
   \item Personengruppe, die die Dienstleistung der Firma in Anspruch nehmen wollen.
\end{itemize}

\subsection{Betriebsbedingungen}
TODO

\section{Produktfunktion}

\subsection{Grundfunktionen}

\begin{usecase}
\addheading{Nummer}{Beschreibung}
\addrow{/FA10/} {Der Server versendet Daten an eine Empf"angergruppe.}
\addrow{/FA20/} {Der Server bietet die M"oglichkeit eines Rekeyings, also
                 der Erzeugung eines komplett neuen Satzes private Schl"ussel
                 f"ur die Benutzer. Diese m"ussen dann auf einem sicheren
                 Weg zugestellt werden}
\addrow{/FA30/} {Der Server verschl"usselt Daten so, dass nur authorisierte
                 Benutzer den Stream entschl"usseln k"onnen.}
\addrow{/FA40/} {Der Server bietet die M"oglichkeit, Nutzer per Namen auszuschließen,
                 ohne dass ein Rekeying erforderlich ist.}
\addrow{/FA50/} {Der Client bietet die M"oglichkeit, sich zu einem Server verbinden.}
\addrow{/FA60/} {Der Client empf"angt Daten und stellt sie dar.}
\addrow{/FA70/} {Der Client erlaubt die Angabe eines privaten Schl"ussels, der von
                 einem Server erzeugt wurde.}
\addrow{/FA80/} {Der Client kann Daten entschlüsseln, nachdem er mit einem
                 g"ultigen Schl"ussel konfiguriert wurde und solange er nicht
                 vom Server explizit ausgeschlossen wurde.}
\addrow{/FA90/} {Der Client merkt sich die letzten ausgewählten Server mit
                 zugeh"origem Schl"ussel, sodass ein erneuter Zugriff schnell möglich
                 ist.}
\addrow{/FA100/} {Die Verschlüsselung erfolgt mit einer Variante des in~\cite[Section 2.2]{Naor00}
                  oder~\cite{Garg10} vorgestellten Verfahrens}
\end{usecase}

\subsection{Erweiterte Funktionen}

\begin{usecase}
\addheading{Nummer}{Beschreibung}
\addrow{/FA200/} {Der Benutzer kann im Client mehrere Serverfavoriten
                  mit Namen und Schl"usseln in einem dedizierten Optionsdialog verwalten,
                  welche dann über ein Kontextmenü auswählbar sind.}
\addrow{/FA210/} {Der Server führt Statistiken über Nutzdatenmenge und Traffic,
                  um den Kommunikationsaufwand für die Verschlüsselung zu
                  analysieren}
\addrow{/FA220/} {Der Client verfügt über eine Anzeige des angefallenen Traffics.}
\addrow{/FA230/} {Der Client verfügt über eine Anzeige des angefallenen Traffics.}
\addrow{/FA240/} {Um Kunden mit volumenbasierten Datentarifen nicht zu belasten,
                  bietet der Client einen WiFi-Modus, in dem er nur bei
                  verf"ugbarer drahtloser Netzwerkverbindung eine Verbindung erlaubt,
                  und nicht "uber das Telefonanbieternetz.}
\addrow{/FA250/} {Der Client puffert empfangene Daten, um eine flüssigere
                  Wiedergabe zu ermöglichen.}
\addrow{/FA260/} {Ein effizienteres Verschlüsselungsverfahren als das vorgebene
                  wird entwickelt und implementiert.}
\end{usecase}

\section{Produktdaten}

\subsection{Grunddaten}
\begin{usecase}
\addheading{Nummer}{Beschreibung}
\addrow{/PD10/} {Server: Benutzerdaten
   \begin{itemize}
   \item Daten f"ur Verschl"usselung: User-ID, Privater Schl"ussel
   \item Persönliche Daten
      \begin{itemize}
      \item Vor- und Nachname
      \item Kontaktinformationen
         \begin{itemize}
         \item Straße und Hausnummer
         \item Postleitzahl
         \item Ort
         \item Land
         \item Telefon
         \item E-Mail-Adresse
         \end{itemize}
      \end{itemize}
   \end{itemize}
}
\addrow{/PD20/} {Client: Serverdaten
   \begin{itemize}
   \item (optional) Alias
   \item Hostname/IP
   \item TCP-Port
   \item Privater Schl"ussel
   \end{itemize}
}
\end{usecase}

\subsection{Erweiterte Daten}
\begin{usecase}
\addheading{Nummer}{Beschreibung}
\addrow{/PD30/} {Server/Client: Trafficstatistiken
   \begin{itemize}
   \item "ubertragene/empfangene Nutzdatenmenge
   \item "ubertragene/empfangene Datenmenge insgesamt
   \end{itemize}
}
\end{usecase}

\section{Produktumgebung}
Der Server muss auf einem Java-fähigen System laufen.
Der Client muss auf einem portablen Gerät auf Basis des Android-Betriebssystems laufen.
\subsection{Software}
\begin{itemize}
\item Client
   \begin{itemize}
      \item Betriebssystem: Android
   \end{itemize}
\item Server
   \begin{itemize}
      \item Java-fähiges System
   \end{itemize}
\end{itemize}

\subsection{Hardware}
\begin{itemize}
\item Client
   \begin{itemize}
      \item Internetfähiges Tablet/Smartphone
   \end{itemize}
\item Server
   \begin{itemize}
      \item Internetfähiger Server
   \end{itemize}
\end{itemize}

\section{Systemmodell}

\input{figures/system_model}
\input{figures/communication_model}

TODO Abbildung, die das geschichtete Kommunikationsmodell darstellt:

\begin{itemize}
   \item Nutzdaten (oberste Schicht)
   \item Verschl"usselungsschicht
   \item Transport (Reliable Multicast/TCP/..)
\end{itemize}

\section{Produktleistung}

\begin{usecase}
\addheading{Nummer}{Beschreibung}
\addrow{/L10/} {Die Antwort auf einen Klick eines Benutzers erfolgt innerhalb von
                höchstens 200ms.}
\addrow{/L20/} {Die Oberfläche der Client-Anwendung ist so intuitiv, dass jeder Benutzer
                sich innerhalb von höchstens 5 Minuten Einarbeitungszeit selbst
                zurechtfindet, ohne die Dokumentation konsultieren zu müssen.}
\addrow{/L30/} {Der Server und das Kommunikationssystem ist in der Lage,
                100000 Benutzer zu bedienen, von denen h"ochestens 1000 einen
                privaten Schl"ussel besitzen, der aber ausgeschlossen ist.}
\end{usecase}

\section{GUI}

\begin{illustration}{Der Ausgangsbildschirm, von dem aus es möglicht ist, zu einem Server zu verbinden.}
\includegraphics[width=150px]{figures/images/homescreen.jpg}
\end{illustration}
\begin{illustration}{Eine Fehlermeldung nach einer Falscheingabe oder ähnlichem.}
\includegraphics[width=150px]{figures/images/alert.jpg}
\end{illustration}


\section{Testfälle}

\begin{usecase}
\addheading{Nummer}{Beschreibung}
\addrow{/T10/} {Ein Benutzer möchte sich unter Benutzung seines Benutzernames und
                Passwortes anmelden, aber das Password ist nicht korrekt. Es wird eine
                Fehlermeldung angezeigt und der Benutzer hat die Möglichkeit, es noch
                einmal zu versuchen.}
\addrow{/T20/} {Ein Benutzer zahlt keine Gebühren mehr. Sein Zugang wird gesperrt.}
\addrow{/T30/} {Ein Benutzer möchte sein Konto löschen. Die Löschung des Kontos wird 
                akzeptiert und das Konto wird gelöscht.}
\end{usecase}

\subsection{Qualitätsanforderungen}

\begin{tabular}{|c|c|c|c|c|}
\hline
 & \sffamily \textbf{sehr wichtig}
 & \sffamily \textbf{wichtig}
 & \sffamily \textbf{weniger wichtig}
 & \sffamily \textbf{unwichtig} \\
\hline
Benutzungsfreundlichkeit &  &  \X & & \\
\hline
Korrektheit &  \X & & &  \\
\hline
Zuverlässigkeit &  \X & & & \\
\hline
Effizienz &   \X & & & \\
\hline
Robustheit &  & & &\\
\hline
Kompatibilität &  & & & \\
\hline
\end{tabular}

\section{Entwicklungsumgebung}
Im Wesentlichen analog zur Produktumgebung

\subsection{Software}
\begin{itemize}
\item Eclipse
\item Git
\end{itemize}
\subsection{Hardware}
\begin{itemize}
\item Rechner
\end{itemize}


\clearpage
\input{glossary}

\bibliography{../bibtex/references}{}
\bibliographystyle{plain}

\end{document}
